{
  "script": "// manupulate data\nconst request = require('request')\n\nfunction updateShutterLog() {\n  let url = \"http://localhost:8081/api/shutter/log/5\"\n  // request module is used to process the yql url and return the results in JSON format\n  request(url, function(err, resp, body) {\n    let log = JSON.parse(body)\n    context.project.sources[1].data = log\n    update()\n    console.log(\"update message sent\")\n  });\n}\n\nfunction update() {\n  // send update message to all windows\n  context.windowManager.forEach( (w) => {\n    // don't send the update message to the sender to avoid loop\n    w.webContents.send('project.open', context.project)\n  })\n}\n\n\nsetInterval(updateShutterLog, 1000)\n",
  "sources": [
    {
      "data": [
        {
          "id": "hello",
          "name": "test1",
          "request_close": true,
          "request_open": true,
          "status": "N/A"
        },
        {
          "id": "2",
          "name": "unkyu",
          "request_close": false,
          "request_open": true,
          "status": "N/A"
        },
        {
          "id": "3",
          "name": "test3",
          "request_close": true,
          "request_open": true,
          "status": "N/A"
        }
      ],
      "id": "SHUTTERS",
      "name": "Shutters"
    },
    {
      "data": [
        {
          "message": "task retrieved: {'created': u'2017-06-02 10:15:18', 'request': u'030_01083\\r', 'id': 32, 'response': None}",
          "id": 35,
          "created": "2017-06-02 10:15:19"
        },
        {
          "message": "writing request to the serial comm: 030_01083\r",
          "id": 36,
          "created": "2017-06-02 10:15:19"
        },
        {
          "message": "s.write(request) failed: ",
          "id": 37,
          "created": "2017-06-02 10:15:19"
        },
        {
          "message": "controller started",
          "id": 34,
          "created": "2017-06-02 09:33:50"
        },
        {
          "message": "controller started",
          "id": 33,
          "created": "2017-06-02 09:32:21"
        }
      ],
      "id": "SHUTTER_LOG",
      "name": "Shutter Log"
    }
  ],
  "elements": [
    {
      "datasource_id": "",
      "h": "150px",
      "id": "TITLE",
      "name": "Main Title",
      "parameter": "Sample Project",
      "script": "\nfunction onClick(e, element) {\n  console.log('onclick from the external script')\n}\n",
      "script_path": "./script/sample.js",
      "style": {
        "color": "white",
        "fontSize": "300%",
        "textAlign": "center",
        "textDecoration": "underline"
      },
      "style_path": "./style/title.js",
      "type": "TextBox",
      "w": "100%",
      "x": "0px",
      "y": "0px"
    },
    {
      "h": "100px",
      "id": "SUB_TITLE",
      "name": "Sub Title",
      "parameter": "This sample project demonstrates features provided by this tool.",
      "script": "\nfunction onClick(e, element) {\n  console.log('onclick from the external script')\n}\n",
      "script_path": "./script/sample.js",
      "style": {
        "color": "lightgray",
        "fontSize": "150%",
        "padding": "10px"
      },
      "style_path": "./style/sub_title.js",
      "type": "TextBox",
      "w": "100%",
      "x": "0px",
      "y": "100px"
    },
    {
      "h": "50px",
      "id": "IMAGE",
      "name": "Image",
      "parameter": "{\n\"src\": \"http://www.ipp.cas.cz/miranda2/export/sitesavcr/ufp/sys/resource/logo.en.png\"\n}",
      "script": "",
      "script_path": "",
      "style": {
        "backgroundColor": "white",
        "color": "black"
      },
      "style_path": "./style/white_background.js",
      "type": "Image",
      "w": "350px",
      "x": "10px",
      "y": "150px"
    },
    {
      "h": "180px",
      "id": "BUTTON_CLOSE",
      "name": "Close All",
      "parameter": "{\n\"bsStyle\": \"danger\",\n\"value\": \"Close All\"\n}",
      "script": "",
      "script_path": "",
      "style": "",
      "style_path": "",
      "type": "Button",
      "w": "100px",
      "x": "570px",
      "y": "350px"
    },
    {
      "datasource_id": "SHUTTERS",
      "h": "auto",
      "id": "TABLE",
      "name": "Table",
      "parameter": "{\n\"header\": [\n  {\"name\": \"#\", \"field\": \"id\", \"width\": \"10%\"},\n  {\"name\": \"shutter\", \"field\": \"name\",  \"width\": \"40%\"},\n  {\"name\": \"status\", \"field\": \"status\",  \"width\": \"20%\"},\n  {\"name\": \"opening\", \"field\": \"request_open\",  \"width\": \"15%\"},\n  {\"name\": \"closing\", \"field\": \"request_close\",  \"width\": \"15%\"}\n]\n}\n",
      "script": "",
      "script_path": "",
      "style": {
        "backgroundColor": "white",
        "color": "black"
      },
      "style_path": "./style/white_background.js",
      "type": "Table",
      "w": "auto",
      "x": "500px",
      "y": "400px"
    },
    {
      "h": "180px",
      "id": "BUTTON_OPEN",
      "name": "Open",
      "parameter": "{\n\"bsStyle\": \"success\",\n\"value\": \"Open\"\n}",
      "script": "context.event.emit('dialog.open', {id: 'DIALOG'})\n",
      "script_path": "./script/showDialog.js",
      "style": "",
      "style_path": "",
      "type": "Button",
      "w": "100px",
      "x": "500px",
      "y": "350px"
    },
    {
      "datasource_id": "SHUTTERS",
      "h": "150px",
      "id": "DIALOG",
      "name": "Dialog",
      "parameter": "{\n\"title\": \"Open Shutter Dialog\",\n\"description\": \"Select shutters to open:\",\n\"field\": \"request_open\",\n\"inline\": true\n}",
      "script": "context.event.emit('dialog.open', {id: 'DIALOG'})\n",
      "script_path": "./script/showDialog.js",
      "style": "",
      "style_path": "",
      "type": "DialogCheckbox",
      "w": "100%",
      "x": "0px",
      "y": "400px"
    },
    {
      "datasource_id": "SHUTTER_LOG",
      "h": "auto",
      "id": "89130b07-0e48-48b6-9a1d-6d9cece6296f",
      "name": "Log",
      "parameter": "{\n\"header\": [\n  {\"name\": \"#\", \"field\": \"id\", \"width\": \"10%\"},\n  {\"name\": \"message\", \"field\": \"message\",  \"width\": \"50%\"},\n  {\"name\": \"when\", \"field\": \"created\",  \"width\": \"40%\"}\n]\n}\n",
      "script": "",
      "script_path": "",
      "style": {
        "backgroundColor": "white",
        "color": "black"
      },
      "style_path": "./style/white_background.js",
      "type": "Table",
      "w": "400px",
      "x": "50px",
      "y": "400px"
    }
  ],
  "types": [
    "Button",
    "DialogCheckbox",
    "Image",
    "Table",
    "TextBox"
  ],
  "filepath": "/home/lee/Project/control-center/doc/project_template.json"
}